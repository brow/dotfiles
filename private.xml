<?xml version="1.0"?>

<!-- Custom mappings for Karabiner -->
<root>
    <!-- Griffin iMate USB-to-ADB adaptor for Apple Extended II keyboard -->
    <devicevendordef>
        <vendorname>GRIFFIN</vendorname>
        <vendorid>0x077d</vendorid>
    </devicevendordef>
    <deviceproductdef>
        <productname>IMATE</productname>
        <productid>0x0405</productid>
    </deviceproductdef>

    <!-- Assume Seil is being used to remap the Caps Lock key to the PC Application key (code 110). Therefore, the PC Application keypress is what we must deal with here. -->

    <item>
        <name>PC Application to Control</name>
        <identifier>private.pc_application_to_control</identifier>
        <device_not>DeviceVendor::GRIFFIN, DeviceProduct::IMATE</device_not>
        <autogen>__KeyToKey__ KeyCode::PC_APPLICATION, KeyCode::CONTROL_L</autogen>
    </item>

    <item>
        <name>PC Application to Control Lock (Caps Lock to Ctrl for Apple Extended II)</name>
        <appendix>https://geekhack.org/index.php?topic=56813.0</appendix>
        <identifier>private.pc_application_to_controlLock</identifier>
        <device_only>DeviceVendor::GRIFFIN, DeviceProduct::IMATE</device_only>
        <autogen>--KeyToKey-- KeyCode::PC_APPLICATION, KeyCode::VK_LOCK_CONTROL_L</autogen>
        <autogen>--KeyToKey-- KeyCode::ESCAPE, KeyCode::ESCAPE, KeyCode::VK_LOCK_ALL_FORCE_OFF</autogen>
    </item>
</root>
